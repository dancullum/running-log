{% extends "base.html" %}

{% block title %}Upcoming - Running Log{% endblock %}

{% block content %}
<div class="card">
    <div class="card-title">Next 7 Days</div>

    <ul class="run-list">
        {% for day in upcoming_days %}
        <li class="run-item">
            <div>
                <span class="run-date">{{ day.date|format_date }}</span>
                {% if day.is_today %}
                    <span style="background: #ffd700; color: #333; padding: 0.1rem 0.4rem; border-radius: 4px; font-size: 0.75rem; margin-left: 0.5rem;">TODAY</span>
                {% endif %}
            </div>
            <div style="text-align: right;">
                {% if day.logged %}
                    <span class="status-logged">{{ day.logged|format_distance }}</span>
                {% elif day.target and day.target > 0 %}
                    <span class="run-distance">{{ day.target|format_distance }}</span>
                {% elif day.target == 0 %}
                    <span class="status-rest">Rest</span>
                {% else %}
                    <span style="color: #888;">-</span>
                {% endif %}
            </div>
        </li>
        {% endfor %}
    </ul>
</div>

<div class="card">
    <div class="card-title">Plan Summary</div>
    <p style="color: #666; font-size: 0.9rem;">
        {% set total_upcoming = upcoming_days|selectattr('target')|map(attribute='target')|select('>', 0)|list|sum %}
        Total planned for next 7 days: <strong>{{ total_upcoming|round(1) }} km</strong>
    </p>
    <p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">
        {% set rest_days = upcoming_days|selectattr('target', 'equalto', 0)|list|length %}
        {% set run_days = upcoming_days|selectattr('target')|selectattr('target', '>', 0)|list|length %}
        {{ run_days }} run days, {{ rest_days }} rest days
    </p>
</div>
{% endblock %}
